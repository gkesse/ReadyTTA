C51 COMPILER V8.12   GINTERRUPT                                                            08/07/2017 23:42:14 PAGE 1   


C51 COMPILER V8.12, COMPILATION OF MODULE GINTERRUPT
OBJECT MODULE PLACED IN .\GInterrupt.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\src\manager\GInterrupt.c BROWSE DEBUG OBJECTEXTEND PRINT(.\GInterrupt.ls
                    -t) OBJECT(.\GInterrupt.obj)

line level    source

   1          //===============================================
   2          #include "GInterrupt.h"
   3          #include "GConfig.h"
   4          #include "GLed.h"
   5          //===============================================
   6          #define PRELOAD01 (65536 - (OSC_FREQ / (OSC_PER_INST * 1000))) // 1 ms
   7          #define PRELOAD01H (PRELOAD01 / 256)
   8          #define PRELOAD01L (PRELOAD01 % 256)
   9          //===============================================
  10          void GInterrupt_Start() {
  11   1              EA = 1;
  12   1      }
  13          //===============================================
  14          void GTimer0_Reload() {
  15   1          TR0 = 0;
  16   1          TH0 = PRELOAD01H;
  17   1          TL0 = PRELOAD01L;
  18   1          TR0 = 1;
  19   1      }
  20          //===============================================
  21          void GTimer1_Reload() {
  22   1          TR1 = 0;
  23   1          TH1 = PRELOAD01H;
  24   1          TL1 = PRELOAD01L;
  25   1          TR1 = 1;
  26   1      }
  27          //===============================================
  28          void GTimer0_Init() {
  29   1              TMOD &= 0xF0;
  30   1          TMOD |= 0x01;
  31   1              GTimer0_Reload();
  32   1              ET0 = 1; 
  33   1      }
  34          //===============================================
  35          void GTimer1_Init() {
  36   1              TMOD &= 0x0F;
  37   1          TMOD |= 0x10;
  38   1              GTimer1_Reload();
  39   1              ET1 = 1; 
  40   1      }
  41          //===============================================
  42          void GTimer2_Init() {
  43   1          T2CON = 0x00; 
  44   1          TH2 = PRELOAD01H; 
  45   1          RCAP2H = PRELOAD01H; 
  46   1          TL2 = PRELOAD01L; 
  47   1          RCAP2L = PRELOAD01L;
  48   1          ET2 = 1;
  49   1          TR2 = 1;
  50   1      }
  51          //===============================================
  52          void GInterrupt_Timer_0() interrupt INTERRUPT_TIMER_0 {
  53   1              GTimer0_Reload();
  54   1              GLed_Flash();
C51 COMPILER V8.12   GINTERRUPT                                                            08/07/2017 23:42:14 PAGE 2   

  55   1      }
  56          //===============================================
  57          void GInterrupt_Timer_1() interrupt INTERRUPT_TIMER_1 {
  58   1              GTimer1_Reload();
  59   1              GLed_Flash();
  60   1      }
  61          //===============================================
  62          void GInterrupt_Timer_2() interrupt INTERRUPT_TIMER_2 {
  63   1              TF2 = 0;
  64   1              GLed_Flash();
  65   1      }
  66          //===============================================


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    254    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
